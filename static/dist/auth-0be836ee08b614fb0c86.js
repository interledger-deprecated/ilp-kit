webpackJsonp([8,18],{288:function(e,t,a){"use strict";function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.remove=t.create=t.loadCodes=t.loadCode=void 0;var n=a(28),r=l(n);t.loadCode=function(e){return{types:[r.LOAD_INVITE,r.LOAD_INVITE_SUCCESS,r.LOAD_INVITE_FAIL],promise:function(t){return t.get("/invites/"+e)}}},t.loadCodes=function(){return{types:[r.LOAD_INVITES,r.LOAD_INVITES_SUCCESS,r.LOAD_INVITES_FAIL],promise:function(e){return e.get("/invites")}}},t.create=function(e){return{types:[r.CREATE_INVITE,r.CREATE_INVITE_SUCCESS,r.CREATE_INVITE_FAIL],promise:function(t){return t.post("/invites",{data:e})}}},t.remove=function(e){return{types:[r.REMOVE_INVITE,r.REMOVE_INVITE_SUCCESS,r.REMOVE_INVITE_FAIL],promise:function(t){return t.del("/invites/"+e)}}}},827:function(e,t,a){"use strict";function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,u,i,d,s=a(14),o=n(s),c=a(3),f=n(c),m=a(13),p=n(m),v=a(5),h=n(v),b=a(4),g=n(b),E=a(7),_=n(E),w=a(1),y=n(w),C=a(2),S=n(C),N=a(18),I=a(114),A=a(154),F=l(A),k=a(99),R=a(47),z=n(R),T=a(826),q=n(T),M=a(1744),P=n(M),O=a(1738),x=n(O),V=a(1736),j=n(V),L=a(16),B=n(L),U=a(1230),D=n(U),W=B.default.bind(D.default),H=(r=(0,N.connect)(function(e){return{user:e.auth.user,authFail:e.auth.fail,verified:e.auth.verified,config:e.auth.config}},(0,_.default)({},F,{pushState:k.routeActions.push})),r((d=i=function(e){function t(){var e,a,l,n;(0,f.default)(this,t);for(var r=arguments.length,u=Array(r),i=0;i<r;i++)u[i]=arguments[i];return a=l=(0,h.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(u))),l.goBack=function(e){e&&e.preventDefault(),l.props.pushState("/")},n=a,(0,h.default)(l,n)}return(0,g.default)(t,e),(0,p.default)(t,[{key:"componentWillMount",value:function(){this.setCurrentView()}},{key:"componentDidMount",value:function(){document.getElementsByTagName("body")[0].className="guest"}},{key:"componentWillReceiveProps",value:function(e){this.setCurrentView(e)}},{key:"componentWillUnmount",value:function(){document.getElementsByTagName("body")[0].className=""}},{key:"setCurrentView",value:function(e){var t=e||this.props,a=t.route.path,l=a&&a.match(/[a-zA-Z-]*/i)[0];"verify"===l&&(l="login"),this.setState({currentView:l||"login"})}},{key:"render",value:function(){var e=this.props,t=e.authFail,a=e.login,l=e.register,n=e.forgot,r=e.changePassword,u=e.verified,i=e.params,d=e.config,s=this.state.currentView,o=this.props.config||{};return y.default.createElement("div",{className:W("Auth")},y.default.createElement("div",null,y.default.createElement("div",{className:W("header")},y.default.createElement("h1",{className:W("title")},o.title)),y.default.createElement("div",{className:W("window")},u&&y.default.createElement(z.default,{bsStyle:"success"},"Your email has been verified!"),"login"===s&&y.default.createElement(q.default,{login:a,fail:t}),"register"===s&&y.default.createElement(P.default,{register:l,fail:t,params:i}),"forgot-password"===s&&y.default.createElement(x.default,{submitAction:n,fail:t}),"change-password"===s&&y.default.createElement(j.default,{submitAction:r,username:i.username,code:i.passwordChangeCode,fail:t})),"login"===s&&d.githubAuth&&y.default.createElement("div",{className:W("oauthBox","clearfix")},y.default.createElement("div",{className:"pull-right"},y.default.createElement("a",{href:"/api/auth/github",className:"btn btn-default"},"Github")),y.default.createElement("div",{className:"pull-right"},"Or login using")),"login"===s&&y.default.createElement("div",{className:W("switchBox")},y.default.createElement("span",{className:W("label")},"Don't have an account?"),y.default.createElement(I.Link,{to:"/register","data-toggle":"tab",role:"tab","aria-expanded":"true",className:W("btnSwitch","btn","btn-default")},"Sign Up")),"register"===s&&y.default.createElement("div",{className:W("switchBox")},y.default.createElement("span",{className:W("label")},"Already have an account?"),y.default.createElement(I.Link,{to:"/login","data-toggle":"tab",role:"tab","aria-expanded":"true",className:W("btnSwitch","btn","btn-default")},"Login"))),("forgot-password"===s||"change-password"===s)&&y.default.createElement("a",{href:"",onClick:this.goBack,className:W("closeButton")},"âœ•"))}}]),t}(w.Component),i.propTypes={authFail:S.default.object,login:S.default.func,register:S.default.func,forgot:S.default.func,config:S.default.object,pushState:S.default.func.isRequired,params:S.default.object,verified:S.default.bool,changePassword:S.default.func},u=d))||u);t.default=H,e.exports=t.default},1224:function(e,t){e.exports={widget:"hyT_Wis3jJcTb3Ah4tKu9",fields:"_3wq9rU-Z9zu6v1zfr88vGC",label:"f-q0YAY6vWRXdd8GzE4pA",fakeInputs:"G5KCBffqwKU7sBLh3DJNj",inviteLink:"vhTbR_CwB6ixcjU-v8zNv",inviteCode:"Ms-nsVCEtWmsFi0vAi1Ba",balance:"nZ8Gv6gMNXiwe4QM-7gnM",number:"_1Hp-HZuMlzsu8cHUpyYyAO",claimed:"_2lU798PYdxW9PgYNS6FaMr"}},1230:function(e,t){e.exports={Auth:"_14A2b_d87WGgg9bNEYHKGB",header:"PzTqp6o-g8OpoSuMuQozv",title:"_3RioFLJQtkJ3fqV6I3LryK",window:"_3x7mr6fJtlCWIJREC0boj",oauthBox:"_22Poie_A_Dl_HI0sHu1F_n",switchBox:"gJ4sZOeWwD8hedBsAL4lR",label:"_1-24-kKxMO3mHCIk5hsgQj",btnSwitch:"_14UTzwrdzpEz0IEKuobvrJ",closeButton:"_2vzAEH8dNjzZmJneXrmFw4"}},1736:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,u,i,d,s=a(7),o=l(s),c=a(14),f=l(c),m=a(3),p=l(m),v=a(13),h=l(v),b=a(5),g=l(b),E=a(4),_=l(E),w=a(1),y=l(w),C=a(2),S=l(C),N=a(49),I=a(1737),A=l(I),F=a(47),k=l(F),R=a(52),z=l(R),T=a(100),q=(n=(0,N.reduxForm)({form:"changePassword",validate:A.default}),r=(0,T.successable)(),n(u=r((d=i=function(e){function t(){var e,a,l,n;(0,p.default)(this,t);for(var r=arguments.length,u=Array(r),i=0;i<r;i++)u[i]=arguments[i];return a=l=(0,g.default)(this,(e=t.__proto__||(0,f.default)(t)).call.apply(e,[this].concat(u))),l.handleSubmit=function(e){var t=(0,o.default)({},e,{username:l.props.username,code:l.props.code});return l.props.submitAction(t).then(function(){l.props.permSuccess(),tracker.track("Change password")}).catch(function(e){throw new N.SubmissionError({_error:e})})},n=a,(0,g.default)(l,n)}return(0,_.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.error,l=e.success,n=e.pristine,r=e.invalid,u=e.submitting,i=e.submitFailed;return y.default.createElement("form",{onSubmit:t(this.handleSubmit)},l&&y.default.createElement(k.default,{bsStyle:"success"},"Your password has been updated successfully"),a&&a.id&&y.default.createElement(k.default,{bsStyle:"danger"},function(){switch(a.id){case"NotFoundError":return"Couldn't find the user with provided username";case"InvalidBodyError":return a.message;default:return"Something went wrong"}}()),!l&&y.default.createElement("div",null,y.default.createElement("div",null,y.default.createElement(N.Field,{name:"password",component:z.default,type:"password",label:"Password",size:"lg",focus:!0}),y.default.createElement(N.Field,{name:"repeatPassword",component:z.default,type:"password",label:"Repeat Password",size:"lg"})),y.default.createElement("div",null,y.default.createElement("button",{type:"submit",className:"btn btn-success",disabled:n||r&&!i||u},u?" Submitting...":" Submit"))))}}]),t}(w.Component),i.propTypes={username:S.default.string.isRequired,code:S.default.string.isRequired,invalid:S.default.bool.isRequired,pristine:S.default.bool.isRequired,submitting:S.default.bool.isRequired,handleSubmit:S.default.func.isRequired,submitAction:S.default.func.isRequired,submitFailed:S.default.bool,error:S.default.object,permSuccess:S.default.func,success:S.default.bool},u=d))||u)||u);t.default=q,e.exports=t.default},1737:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(117),n=(0,l.createValidator)({password:[l.required],repeatPassword:[l.required]});t.default=n,e.exports=t.default},1738:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,u,i,d,s=a(14),o=l(s),c=a(3),f=l(c),m=a(13),p=l(m),v=a(5),h=l(v),b=a(4),g=l(b),E=a(1),_=l(E),w=a(2),y=l(w),C=a(49),S=a(1739),N=l(S),I=a(47),A=l(I),F=a(52),k=l(F),R=a(100),z=(n=(0,C.reduxForm)({form:"forgotPassword",validate:N.default}),r=(0,R.successable)(),n(u=r((d=i=function(e){function t(){var e,a,l,n;(0,f.default)(this,t);for(var r=arguments.length,u=Array(r),i=0;i<r;i++)u[i]=arguments[i];return a=l=(0,h.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(u))),l.handleSubmit=function(e){return l.props.submitAction(e).then(function(){l.props.permSuccess(),tracker.track("Forgot password")}).catch(function(e){throw new C.SubmissionError({_error:e})})},n=a,(0,h.default)(l,n)}return(0,g.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.error,l=e.success,n=e.pristine,r=e.invalid,u=e.submitting,i=e.submitFailed;return _.default.createElement("form",{onSubmit:t(this.handleSubmit)},l&&_.default.createElement(A.default,{bsStyle:"success"},"We've sent an email to you. Please follow the instructions in that email to change your password"),a&&a.id&&_.default.createElement(A.default,{bsStyle:"danger"},function(){switch(a.id){case"NotFoundError":return"Couldn't find the user with provided username or email";default:return"Something went wrong"}}()),!l&&_.default.createElement("div",null,_.default.createElement("div",null,_.default.createElement(C.Field,{name:"resource",component:k.default,label:"Username or Email",size:"lg",focus:!0,autoCapitalize:"off"})),_.default.createElement("div",null,_.default.createElement("button",{type:"submit",className:"btn btn-success btn-lg",disabled:n||r&&!i||u},u?" Submitting...":" Submit"))))}}]),t}(E.Component),i.propTypes={invalid:y.default.bool.isRequired,pristine:y.default.bool.isRequired,submitting:y.default.bool.isRequired,handleSubmit:y.default.func.isRequired,submitAction:y.default.func.isRequired,submitFailed:y.default.bool,error:y.default.object,permSuccess:y.default.func,success:y.default.bool},u=d))||u)||u);t.default=z,e.exports=t.default},1739:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(117),n=(0,l.createValidator)({resource:[l.required]});t.default=n,e.exports=t.default},1744:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,u,i,d,s,o=a(7),c=l(o),f=a(14),m=l(f),p=a(3),v=l(p),h=a(13),b=l(h),g=a(5),E=l(g),_=a(4),w=l(_),y=a(1),C=l(y),S=a(2),N=l(S),I=a(18),A=a(49),F=a(1745),k=l(F),R=a(47),z=l(R),T=a(100),q=a(52),M=l(q),P=a(288),O=a(16),x=l(O),V=a(1224),j=l(V),L=x.default.bind(j.default),B=(n=(0,I.connect)(function(e){return{invite:e.invite.invite,config:e.auth.config}},{loadCode:P.loadCode}),r=(0,A.reduxForm)({form:"register",fields:["username","email","password","inviteCode","name","phone","address1","address2","city","region","country","zip_code","fingerprint"],validate:k.default}),u=(0,T.successable)(),n(i=r(i=u((s=d=function(e){function t(){var e,a,l,n;(0,v.default)(this,t);for(var r=arguments.length,u=Array(r),i=0;i<r;i++)u[i]=arguments[i];return a=l=(0,E.default)(this,(e=t.__proto__||(0,m.default)(t)).call.apply(e,[this].concat(u))),l.state={},l.handleUrlInviteCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.props,t=e.params.inviteCode;t&&(l.props.change("inviteCode",t),l.handleAddInviteCode(t))},l.handleAddInviteCodeClick=function(e){e.preventDefault(),l.setState((0,c.default)({},l.state,{showInviteInput:!0}))},l.handleAddInviteCode=function(e){var t=void 0!==e.value?e.value:e;setTimeout(function(){t&&l.props.loadCode(t).then(function(e){e&&l.setState((0,c.default)({},l.state,{showInviteInput:!1}))})},50)},l.register=function(e){return l.props.register(e).then(l.props.permSuccess).catch(l.props.permFail)},n=a,(0,E.default)(l,n)}return(0,w.default)(t,e),(0,b.default)(t,[{key:"componentDidMount",value:function(){var e=this;if(setTimeout(function(){e.setState({hideFakes:!0})},1),this.props.config.antiFraud){var t="";t+=navigator.plugins.length+",",t+=window.screen.availHeight+",",t+=window.screen.availWidth+",";for(var a=0;a<navigator.plugins.length;a++)t+=navigator.plugins[a].name+",";t+=navigator.language+","+navigator.userLanguage+",",t+=(new Date).getTimezoneOffset()+",",t+=navigator.userAgent,this.props.change("fingerprint",t)}this.handleUrlInviteCode()}},{key:"componentWillReceiveProps",value:function(e){this.props.params!==e.params&&this.handleUrlInviteCode(e)}},{key:"render",value:function(){var e=this.props,t=e.invite,a=e.handleSubmit,l=e.fail,n=e.pristine,r=e.invalid,u=e.submitting,i=e.config,d=this.state&&this.state.hideFakes,s=this.state.showInviteInput;return C.default.createElement("form",{onSubmit:a(this.register),autoComplete:"off"},l&&l.id&&C.default.createElement(z.default,{bsStyle:"danger"},"UsernameTakenError"===l.id&&C.default.createElement("div",null,"Username is already taken"),"EmailTakenError"===l.id&&C.default.createElement("div",null,"Email is already taken"),"InvalidBodyError"===l.id&&C.default.createElement("div",null,l.message),"ServerError"===l.id&&C.default.createElement("div",null,"Something went wrong")),C.default.createElement("div",null,!d&&C.default.createElement("div",{className:L("fakeInputs")},C.default.createElement("input",{type:"text",name:"fakeusernameremembered",ref:"fakeuser"}),C.default.createElement("input",{type:"password",name:"fakepasswordremembered",ref:"fakepass"})),C.default.createElement(A.Field,{name:"username",component:M.default,label:"Username",size:"lg",focus:!0,autoCapitalize:"off"}),C.default.createElement(A.Field,{name:"email",component:M.default,label:"Email",size:"lg",autoCapitalize:"off"}),C.default.createElement(A.Field,{name:"password",component:M.default,label:"Password",size:"lg",type:"password"}),i.antiFraud&&C.default.createElement("div",null,C.default.createElement("div",{className:"row"},C.default.createElement("div",{className:"col-sm-6"},C.default.createElement(A.Field,{name:"name",component:M.default,label:"Full Name",size:"lg"})),C.default.createElement("div",{className:"col-sm-6"},C.default.createElement(A.Field,{name:"phone",component:M.default,label:"Phone",size:"lg"}))),C.default.createElement("div",{className:"row"},C.default.createElement("div",{className:"col-sm-6"},C.default.createElement(A.Field,{name:"address1",component:M.default,label:"Address 1",size:"lg"})),C.default.createElement("div",{className:"col-sm-6"},C.default.createElement(A.Field,{name:"address2",component:M.default,label:"Address 2",size:"lg"}))),C.default.createElement("div",{className:"row"},C.default.createElement("div",{className:"col-sm-6"},C.default.createElement(A.Field,{name:"city",component:M.default,label:"City",size:"lg"})),C.default.createElement("div",{className:"col-sm-6"},C.default.createElement(A.Field,{name:"region",component:M.default,label:"Region",size:"lg"}))),C.default.createElement("div",{className:"row"},C.default.createElement("div",{className:"col-sm-6"},C.default.createElement(A.Field,{name:"country",component:M.default,label:"Country",size:"lg"})),C.default.createElement("div",{className:"col-sm-6"},C.default.createElement(A.Field,{name:"zip_code",component:M.default,label:"Zip Code",size:"lg"})))),!s&&!t.code&&C.default.createElement("a",{href:"",className:L("inviteLink"),onClick:this.handleAddInviteCodeClick},"Have an invite code?"),s&&C.default.createElement(A.Field,{name:"inviteCode",component:M.default,label:"Invite Code",size:"lg",focus:!0,onChange:this.handleAddInviteCode}),t.code&&!t.claimed&&!s&&C.default.createElement("div",{className:L("inviteCode","row")},C.default.createElement("span",{className:L("text","col-sm-9")},"Invite code has been added!"),C.default.createElement("span",{className:L("balance","col-sm-3")},C.default.createElement("span",{className:L("label")},"Balance "),C.default.createElement("span",{className:L("number")},i.currencySymbol,t.amount))),t.claimed&&C.default.createElement("div",{className:L("claimed")},"Provided invite code has already been used. ",C.default.createElement("a",{href:"",onClick:this.handleAddInviteCodeClick},"Try another one"))),C.default.createElement("button",{type:"submit",className:"btn btn-success btn-lg",disabled:n||r||u},u?" Registering...":" Register"))}}]),t}(y.Component),d.propTypes={invite:N.default.object,loadCode:N.default.func,params:N.default.object,config:N.default.object,invalid:N.default.bool.isRequired,pristine:N.default.bool.isRequired,submitting:N.default.bool.isRequired,handleSubmit:N.default.func.isRequired,register:N.default.func.isRequired,change:N.default.func.isRequired,permSuccess:N.default.func,permFail:N.default.func,fail:N.default.any},i=s))||i)||i)||i);t.default=B,e.exports=t.default},1745:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(117),n=(0,l.createValidator)({username:[l.required,l.username],email:[l.required,l.email],password:[l.required,(0,l.minLength)(5)],inviteCode:[l.uuid]});t.default=n,e.exports=t.default}});
//# sourceMappingURL=auth-0be836ee08b614fb0c86.js.map